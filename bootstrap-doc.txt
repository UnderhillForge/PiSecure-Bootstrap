# PiSecure Bootstrap Node Documentation

## Overview
PiSecure Bootstrap Nodes are intelligent, ML-powered network coordinators that provide advanced peer discovery, attack detection, and routing optimization capabilities. Unlike traditional bootstrap services, PiSecure nodes actively monitor network health, detect threats, and optimize routing in real-time.

## Security Hardening Implementation

### = Comprehensive Security Architecture
PiSecure Bootstrap Nodes implement enterprise-grade security with advanced DDoS protection and abuse detection.

#### 1. Input Validation & Sanitization Framework
**Purpose:** Multi-layer input validation with comprehensive sanitization.

**Features:**
- **JSON Schema Validation**: Structured validation for all API endpoints
- **Input Sanitization**: Removes XSS, SQL injection, command injection patterns
- **Type & Bounds Checking**: Strict validation for all input types and ranges
- **Blockchain-Specific Validation**: PiSecure wallet, hash, and amount validation
- **Safe Error Responses**: No information leakage in validation errors

**Validation Engine (`pisecure/api/validation.py`):**
```python
from pisecure.api.validation import validation_engine

# Validate API request
result = validation_engine.validate_request(
    endpoint='/api/v1/transaction',
    data=request_data,
    client_ip='192.168.1.100'
)

if not result.is_valid:
    return jsonify({'error': 'Validation failed', 'details': result.errors}), 400
```

#### 2. Advanced DDoS Protection & Abuse Detection
**Purpose:** ML-powered threat detection with progressive response system.

**Features:**
- **IP Reputation Management**: Dynamic blacklisting with progressive violations
- **Request Fingerprinting**: Advanced pattern analysis for coordinated attacks
- **Suspicious Behavior Detection**: ML-powered threat scoring (0.0-1.0 confidence)
- **Progressive Rate Limiting**: Escalating delays for suspicious IPs
- **Geographic Threat Analysis**: Region-based threat level assessment
- **Bootstrap Intelligence Integration**: Uses threat intelligence for adaptive protection

**DDoS Protection Engine (`pisecure/api/ddos_protection.py`):**
```python
from pisecure.api.ddos_protection import ddos_protection

# Analyze request for threats
analysis = ddos_protection.analyze_request({
    'client_ip': '192.168.1.100',
    'endpoint': '/api/v1/transaction',
    'user_agent': 'Mozilla/5.0...',
    'request_size': 2048,
    'parameters': request_data
})

if analysis['should_block']:
    return jsonify({'error': 'Request blocked by security system'}), 429

# Apply progressive delays
if analysis['delay_seconds'] > 0:
    time.sleep(min(analysis['delay_seconds'], 10))
```

**Protection Statistics:**
```json
{
  "active_clients": 150,
  "blocked_ips": 5,
  "blocked_regions": 2,
  "fingerprints_analyzed": 12500,
  "recent_violations": 3,
  "average_threat_score": 0.15,
  "bootstrap_integration": true,
  "last_cleanup": 1704379200.0
}
```

#### 3. Flask Server Security Integration
**Purpose:** Before-request middleware with comprehensive security checks.

**Security Middleware Features:**
- **Request Pre-Processing**: All requests analyzed before endpoint execution
- **Progressive Validation**: Input validation + DDoS analysis + intelligence checks
- **Security Headers**: XSS protection, content-type options, HSTS
- **Rate Limit Headers**: X-RateLimit-* headers for client awareness
- **Health Endpoint Bypass**: Critical endpoints protected but accessible

**Integration Example:**
```python
@app.before_request
def security_middleware():
    """Apply comprehensive security checks to all requests"""
    if not SECURITY_ENABLED:
        return

    # DDoS Protection Analysis
    ddos_result = ddos_protection.analyze_request(request_data)

    # Input Validation
    validation_result = validation_engine.validate_request(
        endpoint=request.path,
        data=request_data['parameters'],
        client_ip=request_data['client_ip']
    )

    # Security Response Headers
    @app.after_request
    def add_security_headers(response):
        response.headers['X-Content-Type-Options'] = 'nosniff'
        response.headers['X-Frame-Options'] = 'DENY'
        response.headers['X-XSS-Protection'] = '1; mode=block'
        response.headers['Strict-Transport-Security'] = 'max-age=31536000'
        return response
```

#### 4. Attack Detection Patterns
**Purpose:** Comprehensive pattern recognition for various attack types.

**Detected Attack Types:**
- **Enumeration Attacks**: API endpoint scanning patterns
- **User Agent Analysis**: Bot detection via user agent fingerprinting
- **Request Data Analysis**: Fuzzing and injection attempt detection
- **Timing Pattern Analysis**: Automation detection via request regularity
- **Volume-Based Attacks**: Sliding window rate monitoring
- **Geographic Anomalies**: Regional traffic pattern analysis

**Pattern Detection Examples:**
```python
# Enumeration attack detection
if self._detect_enumeration_pattern(fingerprint):
    return 0.8  # High threat score

# Geographic anomaly detection
region_traffic = self._analyze_geographic_threat(ip_address)
if region_traffic > 0.7:
    return 1.0  # Maximum threat
```

#### 5. Progressive Response System
**Purpose:** Intelligent response escalation based on threat levels.

**Response Levels:**
- **Level 1 (Low Threat)**: Logging only, normal processing
- **Level 2 (Moderate Threat)**: Progressive delays (1-5 seconds)
- **Level 3 (High Threat)**: Temporary rate limiting (429 responses)
- **Level 4 (Critical Threat)**: IP blacklisting (403 responses)
- **Level 5 (Severe Threat)**: Regional blocking (network-level)

**Progressive Delay Calculation:**
```python
def _calculate_delay(self, client, threat_score):
    base_delay = int(threat_score * 5)  # 0-5 seconds
    violation_delay = client.violation_count * 2
    total_delay = base_delay + violation_delay + client.delay_level
    return min(total_delay, 30)  # Max 30 second delay
```

#### 6. Intelligence Integration
**Purpose:** Bootstrap server intelligence integration for adaptive protection.

**Intelligence Features:**
- **Load Prediction**: Uses `/api/v1/intelligence/predict` for traffic forecasting
- **Threat Intelligence**: Geographic attack pattern correlation
- **Network Coordination**: Multi-node defense coordination
- **Dynamic Adaptation**: Rate limits adjust based on predicted load

**Intelligence Integration:**
```python
# Get bootstrap intelligence for adaptive protection
intelligence_data = self._get_bootstrap_intelligence(endpoint)

# Adjust protection based on network conditions
if intelligence_data.get('predicted_load', 0) > 1000:
    self.max_requests_per_minute = 50  # Reduce during high load
```

#### 7. Security Monitoring & Analytics
**Purpose:** Comprehensive security event logging and analytics.

**Monitoring Features:**
- **Security Event Logging**: All violations and suspicious activities tracked
- **Protection Statistics**: Real-time monitoring of blocked requests and threats
- **IP Status Tracking**: Violation counts and progressive delay tracking
- **Pattern Analysis**: Request fingerprinting for attack correlation
- **Performance Metrics**: Security overhead and effectiveness tracking

**Analytics API:**
```json
{
  "security_metrics": {
    "total_requests_analyzed": 50000,
    "threats_detected": 1250,
    "requests_blocked": 45,
    "average_response_time": 0.023,
    "false_positive_rate": 0.02
  },
  "attack_patterns": {
    "enumeration_attacks": 15,
    "ddos_attempts": 8,
    "injection_attempts": 22,
    "bot_traffic": 1200
  },
  "geographic_threats": {
    "high_risk_regions": ["cn", "ru"],
    "blocked_regions": 2,
    "regional_threat_score": 0.35
  }
}
```

## Unique Features

### 1. Intelligent Bootstrap Handshake System
**Purpose:** Secure, coordinated bootstrap node registration and service discovery.

#### API Endpoint: `POST /api/v1/bootstrap/handshake`
**Description:** Register secondary bootstrap nodes with the primary node for coordinated operation.

**Request Body:**
```json
{
  "node_id": "bootstrap-secondary-01",
  "address": "192.168.1.100",
  "port": 8081,
  "services": ["peer_discovery", "network_health"],
  "capabilities": ["bootstrap_coordination", "peer_discovery", "network_health"],
  "region": "us-east",
  "version": "1.0.0",
  "reliability_score": 0.95,
  "load_factor": 0.2
}
```

**Response:**
```json
{
  "handshake_accepted": true,
  "primary_node": "bootstrap.pisecure.org",
  "node_id": "bootstrap-secondary-01",
  "registration_time": 1704379200.0,
  "network_info": {
    "total_bootstrap_nodes": 5,
    "active_services": ["coordination", "peer_discovery", "health_monitoring"],
    "protocol_version": "1.0",
    "coordination_enabled": true
  },
  "peer_discovery_endpoints": [
    "/api/v1/bootstrap/peers",
    "/api/v1/network/status"
  ]
}
```

**Unique Features:**
- Service capability validation
- Geographic region assignment
- Load balancing coordination
- Reliability scoring system

### 2. ML-Powered Attack Detection System
**Purpose:** Advanced anomaly detection using machine learning and statistical analysis.

#### API Endpoint: `GET /api/v1/intelligence/attacks`
**Description:** Get current attack detection analysis using ML algorithms.

**Response:**
```json
{
  "detected_attacks": [
    {
      "type": "ml_anomaly_detection",
      "severity": "high",
      "ml_score": -0.85,
      "confidence": 0.95,
      "timestamp": 1704379200.0,
      "description": "ML-detected anomaly with score -0.85"
    }
  ],
  "threat_level": "high",
  "analysis_period": "last_hour",
  "total_analyzed_connections": 1250,
  "ml_models_active": {
    "isolation_forest": true,
    "ensemble_classifier": true,
    "geographic_clustering": true
  },
  "recent_defense_actions": [],
  "active_threat_zones": ["us-east-high-risk"],
  "blocked_ips_count": 0,
  "blocked_regions_count": 0,
  "timestamp": 1704379200.0
}
```

#### API Endpoint: `GET /api/v1/intelligence/defense`
**Description:** Get comprehensive automated defense intelligence and status.

**Response:**
```json
{
  "defense_intelligence": {
    "automated_defense_active": true,
    "ml_attack_detection_enabled": true,
    "smart_routing_enabled": true,
    "threat_intelligence_level": "low",
    "active_attacks_detected": 0,
    "threat_zones_active": 0,
    "auto_response_actions": 0,
    "blocked_entities": 0,
    "defense_effectiveness_score": 95,
    "last_defense_action": null,
    "attack_prevention_rate": 0.92,
    "coordinated_defense_nodes": 3,
    "timestamp": 1704379200.0
  },
  "recent_attacks": [],
  "active_threats": [],
  "defense_capabilities": [
    "ML-powered anomaly detection",
    "Statistical attack pattern recognition",
    "Automated threat response",
    "Smart routing with threat avoidance",
    "Geographic attack clustering",
    "Real-time network immune system"
  ]
}
```

**Unique Features:**
- Isolation Forest ML algorithm for unsupervised anomaly detection
- Statistical attack pattern recognition (connection spikes, geographic anomalies)
- Real-time threat scoring and confidence levels
- Automated defense actions (rate limiting, regional blocking)
- Threat zone management and geographic attack clustering

### 3. Smart Routing Optimization Engine
**Purpose:** AI-powered peer routing with threat awareness and performance optimization.

#### API Endpoint: `POST /api/v1/intelligence/optimize`
**Description:** Get intelligent routing optimization for peer connections.

**Request Body:**
```json
{
  "available_nodes": [
    {
      "node_id": "node-001",
      "location": "us-east",
      "load_factor": 0.3,
      "reliability_score": 0.95
    },
    {
      "node_id": "node-002",
      "location": "eu-west",
      "load_factor": 0.1,
      "reliability_score": 0.98
    }
  ],
  "service_type": "p2p_sync"
}
```

**Response:**
```json
{
  "optimization_success": true,
  "service_type": "p2p_sync",
  "optimized_nodes": [
    {
      "node": {
        "node_id": "node-002",
        "location": "eu-west",
        "load_factor": 0.1,
        "reliability_score": 0.98
      },
      "score": 0.875,
      "geo_score": 0.9,
      "load_score": 0.95,
      "reliability_score": 0.98,
      "route_score": 0.8,
      "threat_adjusted": false
    }
  ],
  "total_candidates": 2,
  "optimization_method": "statistical_scoring",
  "scoring_weights": {
    "geographic_diversity": 0.3,
    "load_balancing": 0.4,
    "reliability": 0.3
  },
  "timestamp": 1704379200.0
}
```

**Unique Features:**
- Threat-aware geographic scoring
- Predictive load balancing
- Reinforcement learning route optimization (Q-table)
- Geographic clustering for regional optimization
- Real-time threat zone avoidance

### 4. Geographic Clustering and Network Analysis
**Purpose:** ML-powered geographic analysis for optimal network topology.

#### API Endpoint: `GET /api/v1/intelligence/clusters`
**Description:** Get geographic clustering analysis for routing optimization.

**Response:**
```json
{
  "geographic_clusters": {
    "0": {
      "locations": ["us-east", "us-central"],
      "total_traffic": 450,
      "centroid": [-95.7129, 37.0902]
    },
    "1": {
      "locations": ["eu-west", "eu-central"],
      "total_traffic": 320,
      "centroid": [10.4515, 51.1657]
    }
  },
  "clustering_method": "kmeans",
  "total_regions_analyzed": 5,
  "cluster_count": 2,
  "routing_optimization_available": true,
  "timestamp": 1704379200.0
}
```

**Unique Features:**
- K-means clustering for geographic region identification
- Traffic pattern analysis by region
- Centroid calculation for optimal routing hubs
- Dynamic cluster adaptation based on network conditions

### 5. Network Load Prediction Engine
**Purpose:** Predictive analytics for network capacity planning.

#### API Endpoint: `GET /api/v1/intelligence/predict`
**Description:** Get network load predictions for capacity planning.

**Response:**
```json
{
  "predictions": {
    "predicted_connections": 1500,
    "confidence": "medium",
    "timeframe_hours": 1,
    "method": "moving_average"
  },
  "confidence_level": "medium",
  "prediction_horizon": "1-24_hours",
  "data_points_used": 1000,
  "model_type": "statistical_time_series",
  "timestamp": 1704379200.0
}
```

**Unique Features:**
- Time series analysis for load forecasting
- Multiple prediction horizons (1-24 hours)
- Confidence scoring for prediction reliability
- Statistical moving average algorithms

### 6. Bootstrap Service Coordination
**Purpose:** Distributed service coordination among bootstrap nodes.

#### API Endpoint: `POST /api/v1/bootstrap/coordinate`
**Description:** Coordinate service distribution among bootstrap nodes.

**Request Body:**
```json
{
  "requesting_node": "node-client-001",
  "service": "peer_discovery"
}
```

**Response:**
```json
{
  "coordination_success": true,
  "service": "peer_discovery",
  "assigned_node": "bootstrap-secondary-02",
  "endpoint": "http://192.168.1.101:8082",
  "capabilities": ["bootstrap_coordination", "peer_discovery"],
  "load_factor": 0.15
}
```

**Unique Features:**
- Service load balancing across bootstrap nodes
- Geographic service optimization
- Reliability-based node selection
- Fallback coordination when primary services unavailable

### 7. Bootstrap Node Registry System
**Purpose:** Centralized registry and monitoring of all bootstrap nodes.

#### API Endpoint: `GET /api/v1/bootstrap/registry`
**Description:** Get the current bootstrap node registry.

**Response:**
```json
{
  "primary_node": {
    "node_id": "bootstrap-primary",
    "address": "bootstrap.pisecure.org",
    "port": 3142,
    "status": "active",
    "services": ["coordination", "peer_discovery", "health_monitoring"]
  },
  "secondary_nodes": [
    {
      "node_id": "bootstrap-secondary-01",
      "address": "192.168.1.100",
      "port": 8081,
      "services": ["peer_discovery", "network_health"],
      "capabilities": ["bootstrap_coordination", "peer_discovery"],
      "region": "us-east",
      "status": "active",
      "load_factor": 0.2,
      "last_seen": 1704379200.0
    }
  ],
  "total_nodes": 4,
  "last_updated": 1704379200.0,
  "coordination_status": "active"
}
```

**Unique Features:**
- Hierarchical bootstrap node architecture
- Service capability tracking
- Geographic distribution monitoring
- Load factor and health status reporting

### 8. Service Advertisement System
**Purpose:** Dynamic service capability advertisement and discovery.

#### API Endpoint: `POST /api/v1/bootstrap/advertise`
**Description:** Advertise current services and status.

**Request Body:**
```json
{
  "node_id": "bootstrap-secondary-01",
  "services": ["peer_discovery", "network_health", "attack_detection"],
  "status": "active",
  "load_factor": 0.25,
  "current_connections": 150,
  "health_metrics": {
    "cpu_usage": 0.45,
    "memory_usage": 0.67,
    "network_latency": 12.5
  },
  "service_endpoints": {
    "peer_discovery": "/api/v1/peers",
    "health_check": "/api/v1/health"
  }
}
```

**Response:**
```json
{
  "advertisement_accepted": true,
  "node_id": "bootstrap-secondary-01",
  "timestamp": 1704379200.0,
  "services_acknowledged": ["peer_discovery", "network_health", "attack_detection"]
}
```

**Unique Features:**
- Dynamic service capability updates
- Health metrics integration
- Load factor reporting for coordination
- Service endpoint discovery

### 9. 314ST Operator Rewards System
**Purpose:** Native PiSecure token rewards for bootstrap node operators.

#### Environment Variables (Railway Configuration)
```bash
BOOTSTRAP_OPERATOR_WALLET=pisecure_wallet_address
BOOTSTRAP_REWARD_PERCENTAGE=0.05
BOOTSTRAP_MINIMUM_PAYOUT=10
BOOTSTRAP_DAILY_BUDGET=1000
```

#### API Endpoints for 314ST Rewards

##### `POST /api/v1/operator/configure-wallet`
**Configure operator reward wallet**

**Request:**
```json
{
  "wallet_address": "pisecure_wallet_operator_abc123"
}
```

**Response:**
```json
{
  "configuration_success": true,
  "wallet_address": "pisecure_wallet_operator_abc123",
  "reward_percentage": 0.05,
  "minimum_payout_314st": 10,
  "timestamp": 1704379200.0
}
```

##### `GET /api/v1/operator/314st-analytics`
**Get comprehensive 314ST reward analytics**

**Response:**
```json
{
  "operator_analytics": {
    "operator_wallet": "pisecure_wallet_operator_abc123",
    "pending_rewards_314st": 25,
    "total_distributed_314st": 150,
    "recent_distributions": [...],
    "performance_score": 87.5,
    "daily_average_earnings": 8.5,
    "reward_configuration": {
      "percentage": 0.05,
      "minimum_payout": 10,
      "daily_budget": 1000
    }
  },
  "network_reward_info": {
    "daily_budget_314st": 1000,
    "intelligence_fee_percentage": 0.05,
    "active_bootstrap_nodes": 4,
    "reward_token": "314ST"
  }
}
```

##### `POST /api/v1/operator/314st-payout`
**Trigger manual 314ST payout**

**Response:**
```json
{
  "payout_success": true,
  "distributed_amount_314st": 25,
  "operator_wallet": "pisecure_wallet_operator_abc123",
  "distribution_timestamp": 1704379200.0
}
```

##### `GET /api/v1/operator/rewards-status`
**Get operator rewards status**

**Response:**
```json
{
  "operator_wallet_configured": true,
  "operator_wallet": "pisecure_wallet_operator_abc123",
  "reward_configuration": {
    "percentage": 0.05,
    "minimum_payout_314st": 10,
    "daily_budget_314st": 1000,
    "reward_token": "314ST"
  },
  "pending_rewards_314st": 25,
  "total_distributed_314st": 150,
  "last_payout_timestamp": 1704378200.0,
  "reward_eligibility": {
    "has_pending_rewards": true,
    "uptime_bonus_eligible": true,
    "federation_bonus_eligible": true
  }
}
```

**Unique Features:**
- Native 314ST token rewards (no external cryptocurrencies)
- Environment variable configuration for Railway deployment
- Performance-based reward bonuses (uptime, federation participation)
- Automatic batch payouts when thresholds reached
- Real-time reward analytics and tracking
- Quality-based intelligence contribution bonuses
- Geographic diversity bonus rewards

### 10. PiSecure DEX (Decentralized Exchange)
**Bootstrap-level DEX coordination with ML intelligence for optimal trading**

#### DEX Coordination APIs

##### `GET /api/v1/dex/pools`
**Get available liquidity pools for DEX trading**

**Response:**
```json
{
  "liquidity_pools": [
    {
      "pool_id": "314ST_wBTC_1704379200",
      "token_a": "314ST",
      "token_b": "wBTC",
      "liquidity_a": 50000,
      "liquidity_b": 25,
      "fee_percentage": 0.003,
      "trade_count": 150,
      "volume_24h": 5000,
      "pool_health_score": 85,
      "exchange_rate": 0.0005
    }
  ],
  "total_pools": 3,
  "dex_health_score": 87,
  "intelligence_enabled": true,
  "timestamp": 1704379200.0
}
```

##### `POST /api/v1/dex/pool/create`
**Create a new liquidity pool**

**Request:**
```json
{
  "token_a": "314ST",
  "token_b": "wBTC",
  "creator_wallet": "pisecure_wallet_creator"
}
```

**Response:**
```json
{
  "pool_created": true,
  "pool_details": {
    "pool_id": "314ST_wBTC_1704379200",
    "token_a": "314ST",
    "token_b": "wBTC",
    "fee_percentage": 0.003
  },
  "intelligence_optimized": true,
  "timestamp": 1704379200.0
}
```

##### `POST /api/v1/dex/pool/add-liquidity`
**Add liquidity to an existing pool**

**Request:**
```json
{
  "pool_id": "314ST_wBTC_1704379200",
  "provider_wallet": "pisecure_wallet_provider",
  "amount_a": 10000,
  "amount_b": 5
}
```

**Response:**
```json
{
  "liquidity_added": true,
  "liquidity_details": {
    "pool_id": "314ST_wBTC_1704379200",
    "liquidity_added": {"amount_a": 10000, "amount_b": 5},
    "reward_314st": 25
  },
  "intelligence_rewards_earned": 25,
  "timestamp": 1704379200.0
}
```

##### `POST /api/v1/dex/swap`
**Execute intelligent token swap with ML optimization**

**Request:**
```json
{
  "token_in": "314ST",
  "token_out": "wBTC",
  "amount_in": 1000,
  "user_wallet": "pisecure_wallet_user",
  "max_slippage": 0.01
}
```

**Response:**
```json
{
  "swap_coordinated": true,
  "swap_details": {
    "swap_id": "swap_1704379200_12345",
    "expected_out": 0.5,
    "min_out": 0.495,
    "pool_id": "314ST_wBTC_1704379200",
    "fee_amount": 3,
    "recommended_slippage": 0.01,
    "intelligence_optimized": true
  },
  "network_conditions": {
    "threat_level": "low",
    "recommended_approach": "standard"
  },
  "estimated_completion": "30_seconds",
  "timestamp": 1704379200.0
}
```

##### `GET /api/v1/dex/intelligence`
**Get comprehensive DEX intelligence and analytics**

**Response:**
```json
{
  "dex_intelligence": {
    "dex_health_score": 87,
    "active_pools": 3,
    "total_liquidity_314st": 150000,
    "trading_volume_24h": 25000,
    "pool_health_analysis": {
      "total_pools": 3,
      "healthy_pools": 3,
      "health_percentage": 100
    },
    "trading_patterns": {
      "peak_trading_hours": ["14:00-16:00 UTC"],
      "popular_pairs": ["314ST/wBTC", "314ST/wETH"],
      "average_trade_size": 500
    },
    "recommendations": [
      "Consider adding incentives for new liquidity pools"
    ],
    "intelligence_benefits": [
      "Optimal trade routing based on network conditions",
      "Threat-aware slippage limits",
      "Pool health monitoring and recommendations"
    ]
  },
  "intelligence_source": "bootstrap_coordinator",
  "network_intelligence_integrated": true,
  "timestamp": 1704379200.0
}
```

##### `GET /api/v1/dex/stats`
**Get DEX statistics and market data**

**Response:**
```json
{
  "dex_stats": {
    "total_pools": 3,
    "total_liquidity_314st": 150000,
    "trading_volume_24h": 25000,
    "popular_pairs": [
      {
        "pair": "314ST/wBTC",
        "pool_id": "314ST_wBTC_1704379200",
        "liquidity": 100000,
        "volume_24h": 15000,
        "trade_count": 200
      }
    ],
    "dex_health_score": 87
  },
  "intelligence_features": [
    "ML-optimized trade routing",
    "Threat-aware liquidity selection",
    "Network condition adaptation",
    "Real-time pool health monitoring"
  ],
  "timestamp": 1704379200.0
}
```

**Unique Features:**
- **Bootstrap-level coordination** with ML intelligence for optimal trading
- **Threat-aware routing** that adapts swap parameters based on network conditions
- **314ST rewards integration** for liquidity providers and DEX users
- **AMM (Automated Market Maker)** mechanics with dynamic fee adjustment
- **Intelligence-enhanced execution** using network health and threat analysis
- **Real-time pool health monitoring** with automated recommendations
- **Federated DEX coordination** across bootstrap nodes for unified liquidity

## Technical Architecture

### ML Models Used
- **Isolation Forest**: Unsupervised anomaly detection for attack identification
- **K-means Clustering**: Geographic region optimization
- **Statistical Analysis**: Z-score calculations, moving averages, time series
- **Reinforcement Learning**: Q-table route optimization

### Data Sources
- Real-time connection monitoring
- Geographic IP geolocation
- Latency measurements
- Service health metrics
- Network traffic patterns

### Security Features
- Service capability validation
- Geographic threat zone management
- Automated rate limiting
- Regional traffic blocking
- Threat intelligence sharing

### Performance Optimizations
- Connection data buffering (1000 entries)
- Geographic caching with database persistence
- Service load balancing algorithms
- Predictive scaling based on ML forecasts

## Deployment Considerations

### Environment Variables
- `FLASK_ENV`: Set to 'development' for debug mode
- `PORT`: Server port (default: 8080)

### Database Requirements
- SQLite database for persistent storage
- Automatic schema creation on startup
- Geo IP caching for performance

### Monitoring and Logging
- Comprehensive logging of all API calls
- ML model initialization status
- Attack detection events
- Service coordination activities

### Scaling Considerations
- Horizontal scaling with multiple bootstrap nodes
- Geographic distribution for global coverage
- Load balancing across service instances
- Database replication for high availability

## Additional Advanced Features

### 11. Bootstrap Node Differentiation & Configuration System
**Purpose:** Hierarchical bootstrap node identification with configurable roles and federation policies.

#### Configuration File: `config.json`
**Description:** Comprehensive node configuration defining identity, federation policies, and operational parameters.

```json
{
  "node": {
    "identity": {
      "name": "PiSecure Bootstrap Primary",
      "node_id": "bootstrap-primary",
      "role": "primary",
      "operator": "PiSecure Foundation",
      "contact_email": "admin@pisecure.org",
      "description": "Primary bootstrap node for PiSecure network"
    },
    "federation": {
      "enabled": true,
      "trust_model": "hierarchical",
      "max_secondary_nodes": 10,
      "sync_interval_seconds": 300,
      "intelligence_sharing": true,
      "trust_levels": {
        "foundation_verified": {
          "max_trust_score": 100,
          "capabilities": ["bootstrap_coordination", "intelligence_sharing"],
          "sync_privileges": "full"
        },
        "community_trusted": {
          "max_trust_score": 75,
          "capabilities": ["peer_discovery", "regional_coordination"],
          "sync_privileges": "limited"
        }
      }
    },
    "security": {
      "require_peer_authentication": true,
      "authentication_method": "capability_based",
      "allowed_jurisdictions": ["us", "eu", "ca"],
      "max_failed_auth_attempts": 3
    }
  }
}
```

**Unique Features:**
- Hierarchical node roles (primary/secondary/tertiary)
- Trust-based federation policies
- Geographic jurisdiction controls
- Operator identification and contact information
- Dynamic configuration loading at startup

### 12. PiSecure Node Registry & Status Tracking
**Purpose:** Comprehensive registration and monitoring system for PiSecure network nodes.

#### API Endpoint: `POST /api/v1/nodes/register`
**Description:** Register PiSecure nodes with the bootstrap server.

**Request Body:**
```json
{
  "node_id": "pisecure-node-001",
  "node_type": "miner",
  "services": ["mining", "p2p_sync"],
  "capabilities": ["syndicate_mining", "block_validation"],
  "location": "us-east",
  "wallet_address": "pisecure_wallet_abc123"
}
```

**Response:**
```json
{
  "registration_success": true,
  "node_id": "pisecure-node-001",
  "registration_time": 1704379200.0,
  "network_info": {
    "bootstrap_coordinator": "bootstrap.pisecure.org",
    "federation_enabled": true,
    "intelligence_sharing": true
  },
  "capabilities_acknowledged": ["syndicate_mining", "block_validation"],
  "services_enabled": ["mining", "p2p_sync"]
}
```

#### API Endpoint: `POST /api/v1/nodes/status`
**Description:** Send periodic status updates from registered nodes.

**Request Body:**
```json
{
  "node_id": "pisecure-node-001",
  "status": "active",
  "mining_active": true,
  "blocks_mined": 15,
  "peers_connected": 3,
  "syndicate_membership": "test_syndicate"
}
```

**Response:**
```json
{
  "status_update_accepted": true,
  "node_id": "pisecure-node-001",
  "intelligence_processed": true,
  "network_recommendations": [
    "Consider upgrading mining hardware for better network contribution"
  ],
  "timestamp": 1704379200.0
}
```

#### API Endpoint: `GET /api/v1/nodes/list`
**Description:** Get list of registered active nodes with filtering.

**Query Parameters:**
- `type`: Filter by node type (miner, validator, wallet, etc.)
- `location`: Filter by geographic location
- `service`: Filter by provided services
- `fresh`: When `true`, bypasses any cached snapshot on secondary nodes and forces a new fetch from the primary registry (defaults to `false`).

**Response:**
```json
{
  "total_registered_nodes": 5,
  "nodes": [
    {
      "node_id": "pisecure-node-001",
      "node_type": "miner",
      "services": ["mining", "p2p_sync"],
      "capabilities": ["syndicate_mining", "block_validation"],
      "location": "us-east",
      "status": "active",
      "last_seen": 1704379200.0,
      "performance_score": 85.5,
      "intelligence_insights": {
        "uptime_percentage": 95.2,
        "avg_peer_connections": 4.2,
        "mining_participation_rate": 88.5,
        "performance_trend": "improving"
      }
    }
  ],
  "filters_applied": {
    "type": "miner",
    "location": null,
    "service": null
  },
  "intelligence_enhanced": true
}
```

**Secondary Proxy Metadata:** When a node runs in secondary mode, the response mirrors the primary registry and includes extra keys:

```json
{
  "proxied_from_primary": true,
  "primary_endpoint": "https://bootstrap.pisecure.org",
  "proxied_by": "bootstrap-secondary-01",
  "timestamp": 1705620000.0,
  "filters_applied": { ... }
}
```

- The data is cached for `PRIMARY_NODELIST_CACHE_TTL` seconds to avoid hammering the primary. Clients can append `?fresh=true` whenever they need the latest view (the dashboard toggles this automatically during troubleshooting).
- Primary nodes omit the proxy metadata because they are the authoritative source.

**Unique Features:**
- Automatic inactive node cleanup (24-hour timeout)
- Performance scoring and trend analysis
- Intelligence-enhanced node insights
- Geographic and service-based filtering
- Real-time status tracking with history

### 13. Intelligence Federation Between Bootstrap Nodes
**Purpose:** Federated intelligence sharing and coordination between bootstrap nodes.

#### FederationSyncManager Class
**Description:** Background synchronization manager for federated intelligence sharing.

**Features:**
- **Background Sync Loop**: Continuous synchronization with peer bootstrap nodes
- **State Checksum Validation**: Integrity checking for synchronized data
- **Configurable Sync Intervals**: Adjustable sync frequency (default: 5 minutes)
- **Thread-Safe Operations**: Lock-protected sync operations
- **Automatic Retry Logic**: Robust connection handling with exponential backoff

**Methods:**
- `start_sync()`: Start background synchronization thread
- `stop_sync()`: Stop background synchronization
- `_perform_sync()`: Execute synchronization with peer nodes
- `_update_state_checksum()`: Calculate state integrity checksum
- `get_sync_status()`: Get current synchronization status

#### API Endpoint: `POST /api/v1/intelligence/share`
**Description:** Share threat intelligence with peer bootstrap nodes.

**Request Body:**
```json
{
  "sender_node_id": "bootstrap-primary",
  "federation_version": "1.0",
  "data": {
    "threat_zones": ["us-east-high-risk"],
    "active_attacks": [...],
    "intelligence_summary": {...}
  },
  "timestamp": 1704379200.0,
  "checksum": "sha256_hash"
}
```

#### API Endpoint: `GET /api/v1/intelligence/sync`
**Description:** Synchronize intelligence from peer bootstrap nodes.

**Response:**
```json
{
  "intelligence_snapshot": {
    "threat_zones": ["us-east-high-risk"],
    "active_attacks": [...],
    "intelligence_summary": {...},
    "sync_timestamp": 1704379200.0,
    "data_freshness": 300.5
  },
  "sync_success": true,
  "data_points_shared": 1500,
  "threat_zones_shared": 5
}
```

#### API Endpoint: `GET /api/v1/intelligence/federation`
**Description:** Get intelligence federation status with sync manager details.

**Response:**
```json
{
  "federation_status": {
    "federation_enabled": true,
    "active_peers": 3,
    "peer_list": [
      {
        "node_id": "bootstrap-secondary-01",
        "endpoint": "https://bootstrap-secondary-01.example.com"
      }
    ],
    "last_sync_times": {
      "bootstrap-secondary-01": 1704379100.0
    },
    "shared_intelligence_count": 150
  },
  "active_sync_status": {
    "running": true,
    "sync_interval": 300,
    "last_sync_time": 1704379200.0,
    "state_checksum": "a1b2c3...",
    "thread_alive": true
  },
  "intelligence_sharing_active": true,
  "network_intelligence_nodes": 4,
  "last_federation_sync": 1704379100.0,
  "intelligence_contributors": {
    "bootstrap_nodes": 3,
    "active_miners": 0,
    "active_wallets": 0,
    "total_contributors": 3
  },
  "federation_health": {
    "sync_active": true,
    "peers_in_sync": 3,
    "state_consistency": true,
    "federation_uptime": 3600.5
  },
  "timestamp": 1704379200.0
}
```

**Unique Features:**
- **FederationSyncManager**: Background synchronization with integrity validation
- **State Checksum Protection**: SHA256-based integrity checking for sync data
- **Thread-Safe Operations**: Concurrent-safe intelligence merging
- **Automatic Peer Discovery**: Dynamic peer list management
- **Cross-bootstrap threat intelligence sharing**: Federated attack detection and response
- **Peer authentication and trust validation**: HMAC-based message authentication
- **Intelligence aggregation across network**: Multi-node intelligence correlation
- **Geographic threat correlation**: Region-based threat pattern analysis
- **Background sync with configurable intervals**: Automated periodic synchronization

### 14. Network Immune System
**Purpose:** Comprehensive automated defense system with ML-powered attack prevention.

**Features:**
- **Automated Defense Actions**: Rate limiting, traffic diversion, regional blocking
- **Threat Zone Management**: Geographic attack pattern identification
- **Defense Effectiveness Tracking**: Success rate monitoring and optimization
- **Coordinated Response**: Multi-node defense coordination
- **Attack Prevention Metrics**: Real-time prevention rate calculation

### 15. Raspberry Pi 5 Installation System
**Purpose:** Automated production deployment on Raspberry Pi 5 hardware.

#### Installation Script: `install.sh`
**Features:**
- Complete system security hardening (UFW, fail2ban, SSH hardening)
- Automatic service management (systemd)
- Performance optimizations for RPi 5
- Health monitoring and automated backups
- Daily security updates and log rotation
- Python virtual environment setup
- Database initialization

#### Installation Command:
```bash
curl -fsSL https://raw.githubusercontent.com/UnderhillForge/PiSecure-Bootstrap/main/bootstrap-install.sh \
  -o bootstrap-install.sh
chmod +x bootstrap-install.sh
sudo BOOTSTRAP_ROLE=primary ./bootstrap-install.sh
```

> **Tip:** Set `BOOTSTRAP_ROLE=secondary` before running the script on follower nodes so they register with the primary during first boot.

#### Post-Installation Configuration:
```bash
# Configure operator wallet
sudo nano /opt/pisecure/bootstrap/.env

# Access dashboard
# http://<rpi-ip>:8080/nodes

# Monitor logs
sudo journalctl -u pisecure-bootstrap -f
```

### Federation Configuration (Primary & Secondary Roles)
PiSecure bootstrap nodes can operate as a **primary coordinator** or a **secondary follower** that mirrors the primary's registry. Configure the following environment variables (typically in `/opt/pisecure/bootstrap/.env`) to control federation behavior:

```bash
BOOTSTRAP_ROLE=primary|secondary
PRIMARY_BOOTSTRAP_DOMAIN=bootstrap.pisecure.org
PRIMARY_BOOTSTRAP_SCHEME=https
PRIMARY_BOOTSTRAP_TIMEOUT=6
PRIMARY_NODELIST_CACHE_TTL=15
BOOTSTRAP_PEERS_CACHE_TTL=60
PISECURE_GENESIS_HASH=2742129a6e95a85dbac0d62cb59c3b8fb9d5a4f56b67a4beec72e59a0bd0f8c2
```

- `BOOTSTRAP_ROLE` toggles the node identity so the server knows when to proxy registry data versus serve as the canonical source.
- `PRIMARY_BOOTSTRAP_*` values tell secondary nodes where to forward bootstrap federation calls and how long to wait before timing out.
- `PRIMARY_NODELIST_CACHE_TTL` (seconds) governs how long the proxied `/api/v1/nodes/list` snapshot stays in memory before a refresh; set to `0` to always fetch live data or increase the value to reduce load on constrained links.
- `BOOTSTRAP_PEERS_CACHE_TTL` (seconds) controls the caching window for `/api/v1/bootstrap/peers`, keeping responses within the PiSecure node 10-second timeout target while reducing duplicated registry work.
- `PISECURE_GENESIS_HASH` allows operators to broadcast a consistent genesis hash in the peer API payload so strict clients can verify they are on the right network. Leave it at `2742129a6e95a85dbac0d62cb59c3b8fb9d5a4f56b67a4beec72e59a0bd0f8c2` for mainnet, or set it to `cedf0871ffacca577bd02d5db5e8c6ba2e1d6cdff43cdadc17c63dc58ed3c24d` for the testnet.
- Secondary nodes automatically invoke `_register_with_primary_bootstrap()` on startup and will reuse the cached snapshot unless the dashboard requests `fresh=true` (see API section below).

### 16. Real-Time Network Dashboard
**Purpose:** Live network statistics and monitoring dashboard.

#### Dashboard URL: `/nodes`
**Features:**
- **Real Node Statistics**: Total and active node counts from `/api/v1/nodes/list`
- **Network Health**: Intelligence-based health scoring from `/api/v1/intelligence/health`
- **Bootstrap Registry**: Live federation status from `/api/v1/bootstrap/registry`
- **DEX Analytics**: Trading data and pool health from `/api/v1/dex/stats`
- **314ST Valuation**: Token economics dashboard with market data
- **Auto-Refresh**: Real-time data updates every 30-120 seconds

#### Dashboard Sections:
- **Network Overview**: Total nodes, active nodes, hashrate, block height
- **Network Health**: Health status, latency, sync status, mempool
- **Mining Statistics**: Active miners, total hashrate, blocks/hour
- **Protocol Information**: Version, consensus, network parameters
- **Bootstrap Nodes**: Federation status and node information
- **Recent Blocks**: Blockchain activity (when mining starts)
- **314ST Token Valuation**: Market price, fundamental value, DEX data

### 17. 314ST Token Valuation Dashboard
**Purpose:** Comprehensive token economics analysis and market data.

#### Features:
- **Fundamental Analysis**: Mining costs, development value, utility metrics
- **Market Price Tracking**: DEX trading data and price discovery
- **Fair Launch Tracking**: Mining progress and token allocation
- **Premium/Discount Analysis**: Fair value vs. market price comparison
- **DEX Integration**: Real-time pool data and trading volume
- **Market Sentiment**: Momentum indicators and trading activity
- **Supply & Demand**: Circulating supply, market cap, token velocity

#### Valuation Components:
- **Mining Cost Floor**: $0.50 (energy + hardware costs)
- **Development Value**: $0.75 (R&D investment)
- **Security Utility**: $0.25 (attack prevention value)
- **Network Premium**: $0.25 (ecosystem value)
- **Fair Launch Bonus**: $0.25 (transparency premium)
- **Total Fundamental Value**: $2.00 per token

### 18. Enhanced DEX Coordination
**Purpose:** Bootstrap-level DEX orchestration with intelligence optimization.

#### Additional DEX Features:
- **Threat-Aware Routing**: Adapts swap parameters based on network conditions
- **Intelligence-Enhanced Execution**: Uses ML for optimal trade timing
- **Federated DEX Coordination**: Unified liquidity across bootstrap nodes
- **Pool Health Monitoring**: Automated recommendations for pool optimization
- **Trading Pattern Analysis**: ML-based market analysis and predictions
- **Liquidity Provider Rewards**: 314ST incentives for pool participation

### 19. Operator Value Estimation System
**Purpose:** Calculate economic value of bootstrap node operations.

#### Value Calculation Components:
- **Intelligence Processing**: ML analysis and threat detection ($50/hour)
- **DEX Coordination Fees**: Percentage of trading volume
- **Network Monitoring**: 24/7 health monitoring ($25/hour)
- **Bootstrap Coordination**: Peer discovery and federation ($30/hour)
- **Uptime Bonuses**: Reliability incentives (up to 20%)
- **Utility Value**: Attack prevention and UX improvements
- **Operating Costs**: Electricity, hosting, maintenance
- **Operator Work Value**: Time and expertise investment

#### Estimated Monthly Value: $37,200 ($1,240/day)
- **Intelligence Revenue**: $21,600 (57.5%)
- **DEX Fees**: $1,500 (4%)
- **Network Services**: $21,600 (57.5%)
- **Utility Value**: $800 (2%)
- **Operating Costs**: $1,080 (3%)
- **Operator Value**: $720 (2%)

### 20. Comprehensive Security & Monitoring
**Purpose:** Enterprise-grade security and operational monitoring.

#### Security Features:
- **Multi-Layer Defense**: UFW, fail2ban, SSH hardening, application security
- **Automated Updates**: Daily security patches and system updates
- **Intrusion Detection**: ML-powered anomaly detection and response
- **Access Control**: Role-based authentication and authorization
- **Audit Logging**: Comprehensive activity logging and monitoring

#### Monitoring Features:
- **Health Checks**: 5-minute automated health monitoring
- **Performance Tracking**: CPU, memory, network, and service metrics
- **Backup System**: Daily automated backups with 7-day retention
- **Log Rotation**: Automatic log management and archival
- **Alert System**: Automated notifications for critical events

## Complete Feature Set

### Core Bootstrap Services
1.  Intelligent Bootstrap Handshake System
2.  ML-Powered Attack Detection System
3.  Smart Routing Optimization Engine
4.  Geographic Clustering and Network Analysis
5.  Network Load Prediction Engine
6.  Bootstrap Service Coordination
7.  Bootstrap Node Registry System
8.  Service Advertisement System

### Advanced Intelligence Features
9.  314ST Operator Rewards System
10.  PiSecure DEX (Decentralized Exchange)
11.  Bootstrap Node Differentiation & Configuration
12.  PiSecure Node Registry & Status Tracking
13.  Intelligence Federation Between Bootstrap Nodes
14.  Network Immune System

### Production & Deployment Features
15.  Raspberry Pi 5 Installation System
16.  Real-Time Network Dashboard
17.  314ST Token Valuation Dashboard
18.  Enhanced DEX Coordination
19.  Operator Value Estimation System
20.  Comprehensive Security & Monitoring

## Technical Implementation

### Configuration Management
- **Config.json Loading**: Dynamic configuration with fallback defaults
- **Environment Variables**: Railway and production deployment support
- **Validation**: Configuration schema validation and error handling
- **Hot Reloading**: Configuration updates without service restart

### Database Architecture
- **SQLite Backend**: Lightweight, reliable persistent storage
- **Schema Management**: Automatic table creation and migration
- **Performance Optimization**: Indexed queries and connection pooling
- **Backup Integration**: Automated database backups with service

### API Design Principles
- **RESTful Endpoints**: Consistent HTTP method usage and URL structure
- **JSON Schema**: Standardized request/response formats
- **Error Handling**: Comprehensive error responses with detailed messages
- **Rate Limiting**: Intelligent API rate limiting and abuse prevention
- **Authentication**: Capability-based authentication for bootstrap federation

### Monitoring & Observability
- **Structured Logging**: JSON-formatted logs with correlation IDs
- **Metrics Collection**: Prometheus-compatible metrics export
- **Health Endpoints**: Multiple health check endpoints for different components
- **Performance Monitoring**: Real-time performance tracking and alerting
- **Audit Trails**: Complete audit logging for security and compliance

### 21. Dual Peer Discovery System (peers.json + API)
**Purpose:** Provide both traditional static peer discovery and dynamic intelligent peer coordination for maximum compatibility and functionality.

#### Static peers.json Endpoint (`/peers.json`)
**Description:** Traditional blockchain bootstrap file serving primary bootstrap node information for compatibility with standard clients.

**Response Format:**
```json
[
  {
    "node_id": "bootstrap-primary",
    "address": "bootstrap.pisecure.org",
    "port": 3142,
    "services": ["coordination", "peer_discovery", "intelligence_sharing"],
    "capabilities": ["bootstrap_coordination", "peer_discovery", "network_health", "intelligence_sharing", "threat_propagation", "regional_coordination", "federation_management"],
    "location": "us-east",
    "operator": "PiSecure Foundation",
    "trust_level": "foundation_verified",
    "version": "1.0.0",
    "description": "Primary PiSecure bootstrap node - authoritative coordination hub with ML-powered intelligence",
    "federation_enabled": true,
    "intelligence_capable": true,
    "dex_coordination": true,
    "last_updated": "2026-01-06T10:39:00Z"
  }
]
```

#### Dynamic /api/v1/bootstrap/peers API
**Description:** Intelligent peer discovery with filtering, geographic optimization, and trust-based selection.

**Query Parameters:**
- `location`: Filter peers by geographic region (e.g., `us-east`, `eu-west`)
- `services`: Filter peers by required services (comma-separated)
- `intelligence`: Enable/disable intelligent filtering (`true`/`false`)
- `limit`: Maximum number of peers to return (default: 10)
- `fresh`: When `true`, bypasses the in-memory cache (default `false`). PiSecure nodes only set this during troubleshooting because the cache already refreshes every `BOOTSTRAP_PEERS_CACHE_TTL` seconds.

**Response Format:**
```json
{
  "peers": [
    {
      "node_id": "bootstrap-primary",
      "address": "bootstrap.pisecure.org",
      "port": 3142,
      "services": ["coordination", "peer_discovery"],
      "capabilities": ["bootstrap_coordination"],
      "location": "us-east",
      "operator": "PiSecure Foundation",
      "trust_level": "foundation_verified",
      "version": "1.0.0",
      "federation_enabled": true,
      "intelligence_capable": true,
      "dex_coordination": true,
      "last_seen": 1704379200.0,
      "reliability_score": 1.0,
      "load_factor": 0.0,
      "intelligence_sharing": true,
      "hardware_verified": true
    }
  ],
  "total_available": 4,
  "returned_count": 3,
  "intelligence_applied": true,
  "filters_applied": {
    "location": "us-east",
    "services": ["peer_discovery"],
    "intelligence_enabled": true,
    "fresh": false
  },
  "recommended_usage": "Use primary bootstrap for initial coordination, secondaries for redundancy",
  "timestamp": 1704379200.0,
  "last_updated": 1704379200.0,
  "ttl": 60,
  "network_info": {
    "total_blocks": 12450,
    "blocks_last_hour": 12,
    "active_nodes": 156,
    "protocol_version": "1.0.0",
    "genesis_hash": "2742129a6e95a85d...",
    "total_bootstrap_nodes": 3,
    "coordination_status": "active"
  },
  "primary_status": {
    "reachable": true,
    "last_success": 1704379200.0,
    "last_failure": 0.0,
    "acting_primary": null,
    "acting_primary_since": 0.0
  },
  "cache": {
    "cached": false,
    "ttl_seconds": 60,
    "generated_at": 1704379200.0,
    "age_seconds": 0.0
  }
}
```

If the canonical primary (`bootstrap.pisecure.org`) cannot be reached, the API sets `primary_status.reachable` to `false`, exposes the elected `acting_primary`, and tags the elected descriptor with `role: acting_primary`/`status: degraded` until the canonical host comes back online.

Mainnet operators should keep the default genesis hash (`2742129a6e95a85dbac0d62cb59c3b8fb9d5a4f56b67a4beec72e59a0bd0f8c2`). For testnet, override `PISECURE_GENESIS_HASH` with `cedf0871ffacca577bd02d5db5e8c6ba2e1d6cdff43cdadc17c63dc58ed3c24d` so clients validate responses against the correct chain.

**Unique Features:**
- **Dual Compatibility**: Supports both traditional peers.json format and advanced API
- **Intelligent Filtering**: Geographic, service-based, and trust-level filtering
- **Reliability Scoring**: Dynamic peer reliability calculation
- **Load Balancing**: Automatic distribution across available peers
- **Geographic Optimization**: Preferentially returns local peers
- **Trust Hierarchy**: Foundation verified > Community trusted > Unverified
- **Real-time Updates**: Dynamic peer list based on current network state
- **Latency Monitoring**: Each response records latency for `/api/v1/bootstrap/peers` so operators can verify the 10-second SLA.
- **Automatic Failover Election**: When the canonical primary is unreachable, secondaries elect an acting primary using health scores, mark it with `role: acting_primary`, and expose the decision through `primary_status` so clients understand the cluster state.

**Usage Examples:**

**Traditional Bootstrap (Bitcoin Core style):**
```bash
# Fetch static peers.json
curl https://bootstrap.pisecure.org/peers.json

# Add to Bitcoin Core
bitcoin-cli addnode bootstrap.pisecure.org:3142 onetry
```

**Intelligent Bootstrap (PiSecure nodes):**
```bash
# Get geographically optimized peers
curl "https://bootstrap.pisecure.org/api/v1/bootstrap/peers?location=us-east&services=peer_discovery,intelligence_sharing"

# Get all available peers with intelligence
curl "https://bootstrap.pisecure.org/api/v1/bootstrap/peers?intelligence=true&limit=5"
```

This documentation covers the complete, advanced capabilities that make PiSecure Bootstrap Nodes significantly more intelligent, secure, and capable than traditional blockchain bootstrap services. The system provides enterprise-grade bootstrap coordination with ML-powered intelligence, comprehensive security, and production-ready deployment options.